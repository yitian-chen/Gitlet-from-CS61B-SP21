# Gitlet Design Document

**Name**:Chen

## Classes


### Main
程序的入口 
- 读取命令行参数，根据第一个参数来判断调用哪个命令
- 调用Repository中对应的方法来执行业务逻辑


### Repository
管理仓库的状态
- 处理所有的gitlet命令
- 是程序的主体
- command的实现所用到的helpers也放在里面


### Commits
Commit对象的类
每个commit中存储了以下信息
````
message (String)
timestamp (Automatically generated by the constructor)
id (String SHA-1 hash, automatically generated by the constructor)
parent (String SHA-1 hash)
trackedFiles (Map<String, String>)(Map<Filename, blobId>)
````

## Persistence Structure
将下面的结构写入存储：
````
.gitlet/
├── HEAD(存储HEAD指针的位置)
├── objects/
│   ├── commits/
│   └── blobs/(存储每个add进的文件，名字是hash)
├── refs/
│   ├── heads/(内含master文件，内容是master指向的commit的hash; 与其他的branch文件，文件名是branch名，内容是hash)
│   └── remotes/(存放来自remote的branches)
│       ├── (remote1)(文件夹名为remote名，其内存放fetch过来的branch文件)
│       └── (remote2)
├── staging/
│   ├── add/(存放刚add的文件，文件名为原文件名，blobId(hash)作为文件内容)
│   └── remove/
└── remote/(存放remote信息，文件名是remote名，path作为文件内容
````
即所有的有关文件都存储在.gitlet文件夹中
